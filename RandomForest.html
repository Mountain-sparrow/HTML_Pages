<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Forest: A Visual Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }

        .tree-connector {
            stroke-dasharray: 10;
            animation: dash 30s linear infinite;
        }

        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }

        .vote-card {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .vote-card.active {
            transform: scale(1.05);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: #10B981;
        }

        .leaf-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        /* Voting animation classes */
        .traveling-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #3B82F6;
            transition: all 1s ease-in-out;
            opacity: 0;
            z-index: 20;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- Hero Section -->
    <header class="bg-gradient-to-br from-emerald-800 to-teal-600 text-white min-h-[60vh] flex items-center relative overflow-hidden">
        <div class="absolute inset-0 opacity-10 pattern-dots"></div>
        <div class="container mx-auto px-6 relative z-10 grid md:grid-cols-2 gap-12 items-center">
            <div>
                <div class="inline-block px-4 py-1 bg-emerald-700 rounded-full text-sm font-semibold mb-4 border border-emerald-500">Machine Learning Simplified</div>
                <h1 class="text-5xl md:text-6xl font-bold mb-6 leading-tight">The Wisdom of the <br/><span class="text-emerald-200">Random Forest</span></h1>
                <p class="text-xl md:text-2xl text-emerald-100 mb-8 font-light">Why ask one expert when you can ask a thousand? Discover how democracy works in Machine Learning.</p>
                <a href="#metaphor" class="bg-white text-emerald-800 px-8 py-4 rounded-lg font-bold hover:bg-emerald-50 transition-colors shadow-lg inline-flex items-center gap-2">
                    Start the Journey <i class="fas fa-arrow-down"></i>
                </a>
            </div>
            <div class="hidden md:flex justify-center">
                <!-- Abstract Forest SVG Art -->
                <svg width="400" height="400" viewBox="0 0 400 400" class="drop-shadow-2xl">
                    <circle cx="200" cy="200" r="180" fill="rgba(255,255,255,0.1)" />
                    <!-- Tree 1 -->
                    <g class="leaf-float" style="animation-delay: 0s;">
                        <path d="M100 300 L100 200" stroke="white" stroke-width="4" />
                        <circle cx="100" cy="200" r="40" fill="#34D399" />
                        <circle cx="80" cy="180" r="30" fill="#10B981" />
                        <circle cx="120" cy="180" r="30" fill="#059669" />
                    </g>
                    <!-- Tree 2 -->
                    <g class="leaf-float" style="animation-delay: 1s;">
                        <path d="M200 320 L200 180" stroke="white" stroke-width="4" />
                        <circle cx="200" cy="180" r="50" fill="#34D399" />
                        <circle cx="170" cy="150" r="35" fill="#10B981" />
                        <circle cx="230" cy="150" r="35" fill="#059669" />
                        <circle cx="200" cy="120" r="30" fill="#6EE7B7" />
                    </g>
                    <!-- Tree 3 -->
                    <g class="leaf-float" style="animation-delay: 2s;">
                        <path d="M300 300 L300 200" stroke="white" stroke-width="4" />
                        <circle cx="300" cy="200" r="40" fill="#34D399" />
                        <circle cx="280" cy="180" r="30" fill="#10B981" />
                        <circle cx="320" cy="180" r="30" fill="#059669" />
                    </g>
                </svg>
            </div>
        </div>
    </header>

    <!-- The Metaphor Section -->
    <section id="metaphor" class="py-20 bg-white">
        <div class="container mx-auto px-6 max-w-4xl">
            <h2 class="text-3xl font-bold text-slate-800 mb-8 text-center">The Metaphor: The Movie Council</h2>
            
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="space-y-6 text-lg text-slate-600 leading-relaxed">
                    <p>
                        Imagine you want to know if you'll like a new movie. 
                    </p>
                    <div class="bg-blue-50 p-6 rounded-xl border-l-4 border-blue-500">
                        <h3 class="font-bold text-blue-800 mb-2">Scenario A: The Single Friend (Decision Tree)</h3>
                        <p>You ask your friend <strong>Bob</strong>. Bob loves action movies but hates romance. If the movie has explosions, he says "Watch it!" regardless of the plot.</p>
                        <p class="mt-2 text-sm text-blue-600">Problem: Bob is biased. He oversimplifies.</p>
                    </div>
                    
                    <div class="bg-emerald-50 p-6 rounded-xl border-l-4 border-emerald-500">
                        <h3 class="font-bold text-emerald-800 mb-2">Scenario B: The Council (Random Forest)</h3>
                        <p>You ask <strong>100 people</strong>. But you don't show them the whole movie trailer.</p>
                        <ul class="list-disc ml-5 mt-2 space-y-1 text-sm">
                            <li>Group A only looks at the <strong>Director</strong>.</li>
                            <li>Group B only looks at the <strong>Actors</strong>.</li>
                            <li>Group C only looks at the <strong>Genre</strong>.</li>
                        </ul>
                        <p class="mt-3">They all vote. If 80 people say "Watch it", you watch it.</p>
                        <p class="mt-2 text-sm text-emerald-600 font-bold">Solution: The "crowd" cancels out individual biases.</p>
                    </div>
                </div>
                
                <div class="relative h-80 bg-slate-100 rounded-2xl flex items-center justify-center overflow-hidden border border-slate-200">
                    <!-- Simple Illustration of Voting -->
                    <div class="text-center">
                        <div class="flex justify-center space-x-4 mb-8">
                            <div class="animate-bounce" style="animation-delay: 0s"><i class="fas fa-user text-3xl text-blue-400"></i></div>
                            <div class="animate-bounce" style="animation-delay: 0.2s"><i class="fas fa-user text-3xl text-red-400"></i></div>
                            <div class="animate-bounce" style="animation-delay: 0.4s"><i class="fas fa-user text-3xl text-emerald-400"></i></div>
                            <div class="animate-bounce" style="animation-delay: 0.1s"><i class="fas fa-user text-3xl text-purple-400"></i></div>
                            <div class="animate-bounce" style="animation-delay: 0.3s"><i class="fas fa-user text-3xl text-yellow-400"></i></div>
                        </div>
                        <i class="fas fa-arrow-down text-slate-300 text-2xl mb-4"></i>
                        <div class="bg-white px-6 py-3 rounded-full shadow-lg font-bold text-emerald-600 text-xl border border-emerald-100">
                            Majority Vote Wins!
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Simulation -->
    <section class="py-20 bg-slate-100 border-y border-slate-200">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <span class="text-emerald-600 font-bold tracking-wide uppercase text-sm">Interactive Demo</span>
                <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mt-2">The Fruit Classifier</h2>
                <p class="text-slate-600 mt-4 max-w-2xl mx-auto">See how a Random Forest classifies a mystery fruit based on its features (Color and Size). Watch the data flow through different trees!</p>
            </div>

            <!-- Simulation Dashboard -->
            <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col md:flex-row">
                
                <!-- Controls -->
                <div class="w-full md:w-1/3 bg-slate-50 p-8 border-r border-slate-200 z-10">
                    <h3 class="font-bold text-xl mb-6">1. Create Mystery Fruit</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Color</label>
                            <div class="flex gap-4">
                                <button onclick="selectColor('red')" id="btn-red" class="w-12 h-12 rounded-full bg-red-500 hover:ring-4 ring-red-200 transition-all focus:outline-none ring-offset-2"></button>
                                <button onclick="selectColor('yellow')" id="btn-yellow" class="w-12 h-12 rounded-full bg-yellow-400 hover:ring-4 ring-yellow-200 transition-all focus:outline-none ring-offset-2"></button>
                                <button onclick="selectColor('green')" id="btn-green" class="w-12 h-12 rounded-full bg-green-500 hover:ring-4 ring-green-200 transition-all focus:outline-none ring-offset-2"></button>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Size</label>
                            <input type="range" id="size-slider" min="1" max="100" value="50" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-emerald-600">
                            <div class="flex justify-between text-xs text-slate-400 mt-1">
                                <span>Small (Berry)</span>
                                <span>Large (Melon)</span>
                            </div>
                        </div>

                        <div class="pt-4 border-t border-slate-200">
                            <div class="flex items-center justify-between mb-4 bg-white p-3 rounded-lg border border-slate-200">
                                <span class="text-sm font-medium">Selected Fruit:</span>
                                <div id="fruit-preview" class="w-8 h-8 rounded-full bg-red-500 transition-all duration-300"></div>
                            </div>
                            <button onclick="runSimulation()" id="run-btn" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex justify-center items-center gap-2">
                                <i class="fas fa-play"></i> Run Forest Prediction
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Visualization Area -->
                <div class="w-full md:w-2/3 p-8 relative min-h-[500px] bg-slate-50">
                    
                    <!-- Input Stage -->
                    <div class="absolute left-8 top-1/2 -translate-y-1/2 text-center" id="start-node">
                        <div class="font-bold text-slate-400 text-sm mb-2">INPUT</div>
                        <div class="w-16 h-16 border-2 border-slate-300 rounded-xl flex items-center justify-center bg-white shadow-sm">
                            <span class="text-2xl">?</span>
                        </div>
                    </div>

                    <!-- The Forest Stage -->
                    <div class="absolute left-1/3 top-0 bottom-0 w-1/3 flex flex-col justify-center space-y-8">
                        <div class="text-center absolute top-4 w-full text-slate-400 font-bold text-sm">THE FOREST (3 Trees)</div>
                        
                        <!-- Tree 1 -->
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200 relative tree-node" id="tree-1">
                            <div class="flex items-center gap-3">
                                <div class="bg-emerald-100 text-emerald-600 p-2 rounded"><i class="fas fa-tree"></i></div>
                                <div>
                                    <div class="text-xs text-slate-400 font-bold">TREE 1</div>
                                    <div class="text-xs text-slate-500">Checks: Color</div>
                                </div>
                            </div>
                            <div class="mt-2 text-right font-bold text-slate-800 result-text opacity-0 transition-opacity">...</div>
                        </div>

                        <!-- Tree 2 -->
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200 relative tree-node" id="tree-2">
                            <div class="flex items-center gap-3">
                                <div class="bg-blue-100 text-blue-600 p-2 rounded"><i class="fas fa-tree"></i></div>
                                <div>
                                    <div class="text-xs text-slate-400 font-bold">TREE 2</div>
                                    <div class="text-xs text-slate-500">Checks: Size</div>
                                </div>
                            </div>
                            <div class="mt-2 text-right font-bold text-slate-800 result-text opacity-0 transition-opacity">...</div>
                        </div>

                        <!-- Tree 3 -->
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200 relative tree-node" id="tree-3">
                            <div class="flex items-center gap-3">
                                <div class="bg-purple-100 text-purple-600 p-2 rounded"><i class="fas fa-tree"></i></div>
                                <div>
                                    <div class="text-xs text-slate-400 font-bold">TREE 3</div>
                                    <div class="text-xs text-slate-500">Checks: Both</div>
                                </div>
                            </div>
                            <div class="mt-2 text-right font-bold text-slate-800 result-text opacity-0 transition-opacity">...</div>
                        </div>
                    </div>

                    <!-- Output Stage -->
                    <div class="absolute right-8 top-1/2 -translate-y-1/2 text-center w-40">
                        <div class="font-bold text-slate-400 text-sm mb-2">FINAL VERDICT</div>
                        <div id="final-result-box" class="bg-white p-6 rounded-xl border-2 border-dashed border-slate-300 flex flex-col items-center justify-center min-h-[120px] transition-all">
                            <span class="text-slate-300 italic">Waiting...</span>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>

    <!-- Why it Works Section -->
    <section class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-16">Why is it so powerful?</h2>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Concept 1 -->
                <div class="p-8 rounded-2xl bg-slate-50 hover:bg-emerald-50 transition-colors group">
                    <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-md mb-6 text-2xl group-hover:scale-110 transition-transform text-emerald-600">
                        <i class="fas fa-random"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">1. Randomness (Bagging)</h3>
                    <p class="text-slate-600">Each tree gets a slightly different subset of the data. This is like asking friends who have seen different parts of the movie. It prevents the model from memorizing just one specific pattern.</p>
                </div>

                <!-- Concept 2 -->
                <div class="p-8 rounded-2xl bg-slate-50 hover:bg-blue-50 transition-colors group">
                    <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-md mb-6 text-2xl group-hover:scale-110 transition-transform text-blue-600">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">2. Resistance to Noise</h3>
                    <p class="text-slate-600">If one tree makes a mistake (predicts "Banana" because the Apple was yellow), the other 99 trees will likely correct it. The majority rules, filtering out errors.</p>
                </div>

                <!-- Concept 3 -->
                <div class="p-8 rounded-2xl bg-slate-50 hover:bg-purple-50 transition-colors group">
                    <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-md mb-6 text-2xl group-hover:scale-110 transition-transform text-purple-600">
                        <i class="fas fa-sitemap"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">3. No Overfitting</h3>
                    <p class="text-slate-600">A single decision tree tries too hard to fit every data point perfectly (overfitting). A forest averages out these "perfect fits" to create a more generalized, robust rule.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Use Cases -->
    <section class="py-20 bg-slate-900 text-white">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl font-bold text-center mb-4">Real World Use Cases</h2>
            <p class="text-center text-slate-400 mb-12">Where is Random Forest actually used?</p>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                    <i class="fas fa-heartbeat text-red-400 text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">Medicine</h4>
                    <p class="text-sm text-slate-300">Predicting disease risks based on patient history. Trees analyze symptoms, genetics, and lifestyle.</p>
                </div>
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                    <i class="fas fa-chart-line text-green-400 text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">Finance</h4>
                    <p class="text-sm text-slate-300">Fraud detection. Is this credit card transaction normal? The forest looks at location, amount, and time.</p>
                </div>
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                    <i class="fas fa-shopping-cart text-yellow-400 text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">E-Commerce</h4>
                    <p class="text-sm text-slate-300">Product recommendations. "Customers who bought this also bought..."</p>
                </div>
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
                    <i class="fas fa-home text-blue-400 text-3xl mb-4"></i>
                    <h4 class="font-bold text-lg mb-2">Real Estate</h4>
                    <p class="text-sm text-slate-300">Predicting house prices based on location, square footage, and neighborhood data.</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-slate-950 text-slate-500 py-8 text-center text-sm">
        <p>&copy; I made it with ❤️ for Learning.</p>
    </footer>

    <script>
        // --- Simulation Logic ---
        
        let selectedColor = 'red';
        let selectedSize = 50;

        function selectColor(color) {
            selectedColor = color;
            // Update preview
            const preview = document.getElementById('fruit-preview');
            const colors = {'red': 'bg-red-500', 'yellow': 'bg-yellow-400', 'green': 'bg-green-500'};
            
            // Remove old classes
            preview.classList.remove('bg-red-500', 'bg-yellow-400', 'bg-green-500');
            preview.classList.add(colors[color]);

            // Update button states
            ['red', 'yellow', 'green'].forEach(c => {
                const btn = document.getElementById(`btn-${c}`);
                if(c === color) btn.classList.add('ring-4');
                else btn.classList.remove('ring-4');
            });
        }

        // Listen for slider changes
        document.getElementById('size-slider').addEventListener('input', (e) => {
            selectedSize = e.target.value;
            const preview = document.getElementById('fruit-preview');
            // Visual scale
            const scale = 0.5 + (selectedSize / 100);
            preview.style.transform = `scale(${scale})`;
        });

        // Initialize state
        selectColor('red');


        function runSimulation() {
            const btn = document.getElementById('run-btn');
            if(btn.disabled) return;
            
            // Lock UI
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
            document.getElementById('final-result-box').innerHTML = '<span class="text-slate-300 italic">Processing...</span>';
            document.querySelectorAll('.result-text').forEach(el => el.classList.add('opacity-0'));

            // 1. Logic for Trees (Simplified Rules)
            // Apple: Red/Green, Medium size
            // Banana: Yellow, Any size
            // Cherry: Red, Small size
            // Watermelon: Green, Large size

            let tree1Vote = ""; // Focus on Color
            if(selectedColor === 'red') tree1Vote = "Apple";
            else if(selectedColor === 'yellow') tree1Vote = "Banana";
            else tree1Vote = "Watermelon"; // Tree 1 is biased towards Watermelon for green

            let tree2Vote = ""; // Focus on Size
            if(selectedSize < 30) tree2Vote = "Cherry";
            else if(selectedSize > 70) tree2Vote = "Watermelon";
            else tree2Vote = "Apple";

            let tree3Vote = ""; // Complex logic
            if(selectedColor === 'yellow') tree3Vote = "Banana";
            else if(selectedColor === 'red' && selectedSize < 40) tree3Vote = "Cherry";
            else if(selectedColor === 'green' && selectedSize > 60) tree3Vote = "Watermelon";
            else tree3Vote = "Apple";

            const votes = [tree1Vote, tree2Vote, tree3Vote];

            // 2. Animation Step: Create traveling dots
            const startNode = document.getElementById('start-node');
            const trees = ['tree-1', 'tree-2', 'tree-3'];
            const startRect = startNode.getBoundingClientRect();
            const containerRect = startNode.closest('.relative').getBoundingClientRect();

            trees.forEach((treeId, index) => {
                const treeEl = document.getElementById(treeId);
                const treeRect = treeEl.getBoundingClientRect();
                
                const dot = document.createElement('div');
                dot.className = 'traveling-dot';
                dot.style.left = (startRect.left - containerRect.left + 30) + 'px';
                dot.style.top = (startRect.top - containerRect.top + 30) + 'px';
                
                // Set color of dot based on selection
                const colorMap = {'red': '#EF4444', 'yellow': '#FACC15', 'green': '#22C55E'};
                dot.style.backgroundColor = colorMap[selectedColor];

                startNode.closest('.relative').appendChild(dot);

                // Animate to tree
                setTimeout(() => {
                    dot.style.opacity = '1';
                    dot.style.left = (treeRect.left - containerRect.left) + 'px';
                    dot.style.top = (treeRect.top - containerRect.top + 20) + 'px';
                }, 50);

                // Tree Processing
                setTimeout(() => {
                    // Show tree result
                    const resText = treeEl.querySelector('.result-text');
                    resText.innerText = `Votes: ${votes[index]}`;
                    resText.classList.remove('opacity-0');
                    
                    // Animate dot to final
                    const finalBox = document.getElementById('final-result-box');
                    const finalRect = finalBox.getBoundingClientRect();
                    dot.style.left = (finalRect.left - containerRect.left) + 'px';
                    dot.style.top = (finalRect.top - containerRect.top + 50) + 'px';

                    // Cleanup dot
                    setTimeout(() => dot.remove(), 1000);

                }, 1500 + (index * 200));
            });

            // 3. Final Calculation
            setTimeout(() => {
                // Count votes
                const counts = {};
                votes.forEach(v => counts[v] = (counts[v] || 0) + 1);
                const winner = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
                
                // Map winner to icon/color
                const resultStyles = {
                    'Apple': {icon: 'fa-apple-alt', color: 'text-red-500'},
                    'Banana': {icon: 'fa-carrot', color: 'text-yellow-500'}, // using carrot as banana approximation or finding similar
                    'Cherry': {icon: 'fa-certificate', color: 'text-red-600'}, // abstract for cherry
                    'Watermelon': {icon: 'fa-circle', color: 'text-green-600'}
                };
                
                // Fix specific icons
                let iconClass = "fa-star";
                let colorClass = "text-slate-800";
                
                if(winner === 'Apple') { iconClass="fa-apple-alt"; colorClass="text-red-500"; }
                if(winner === 'Banana') { iconClass="fa-lemon"; colorClass="text-yellow-500"; } // Lemon is close in color
                if(winner === 'Cherry') { iconClass="fa-dot-circle"; colorClass="text-red-600"; }
                if(winner === 'Watermelon') { iconClass="fa-bowling-ball"; colorClass="text-green-600"; }

                const finalBox = document.getElementById('final-result-box');
                finalBox.className = `bg-white p-6 rounded-xl border-2 border-emerald-500 shadow-lg flex flex-col items-center justify-center min-h-[120px] transition-all transform scale-110`;
                
                finalBox.innerHTML = `
                    <div class="text-3xl ${colorClass} mb-2"><i class="fas ${iconClass}"></i></div>
                    <div class="text-2xl font-bold text-slate-800">${winner}</div>
                    <div class="text-xs text-slate-400 mt-1">${counts[winner]}/3 Trees Agreed</div>
                `;

                // Unlock UI
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');

            }, 3000);
        }
    </script>
</body>
</html>